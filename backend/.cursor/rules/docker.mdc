# Backend Docker Development Guidelines

## Project Docker Structure
This project uses environment-based Docker organization:

- **Development**: [docker/dev/](mdc:docker/dev/) - Local development environment
- **Production**: [docker/prod/](mdc:docker/prod/) - Production deployment
- **Testing**: [docker/test/](mdc:docker/test/) - Isolated testing environment

## Development Environment
- **Docker Compose**: [docker/dev/docker-compose.dev.yml](mdc:docker/dev/docker-compose.dev.yml)
- **Dockerfile**: [docker/dev/Dockerfile.dev](mdc:docker/dev/Dockerfile.dev)
- **Ports**: Backend on 8000, PostgreSQL on 5433

## Production Environment
- **Docker Compose**: [docker/prod/docker-compose.prod.yml](mdc:docker/prod/docker-compose.prod.yml)
- **Dockerfile**: [docker/prod/Dockerfile.prod](mdc:docker/prod/Dockerfile.prod)
- **Ports**: Backend on 8001, PostgreSQL on 5436
- **Features**: Gunicorn with multiple workers, production optimizations

## Testing Environment
- **Docker Compose**: [docker/test/docker-compose.test.yml](mdc:docker/test/docker-compose.test.yml)
- **Dockerfile**: [docker/test/Dockerfile.test](mdc:docker/test/Dockerfile.test)
- **Purpose**: Isolated testing with separate database

## Make Commands
Use the [Makefile](mdc:Makefile) for common operations:

### Development
- `make dev-up` - Start development environment
- `make dev-down` - Stop development environment
- `make dev-logs` - View development logs

### Production
- `make prod-up` - Start production environment
- `make prod-down` - Stop production environment
- `make prod-logs` - View production logs

### Testing
- `make test-env` - Start testing environment
- `make test-down` - Stop testing environment

### Utility
- `make clean` - Remove all containers and volumes
- `make format` - Format code with ruff
- `make lint` - Run linting checks

## Docker Best Practices
- Each environment has complete isolation
- Use volume mounts for persistent data
- Follow the Docker documentation in [docker/README.md](mdc:docker/README.md)
- Use environment-specific configurations
description:
globs:
alwaysApply: false
---
